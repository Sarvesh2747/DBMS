-- Step 1: Create StudMarks Table
CREATE TABLE StudMarks (
    name VARCHAR2(50),
    totalmarks NUMBER
);

-- Step 2: Create Result Table
CREATE TABLE Result (
    name VARCHAR2(50),
    totalmarks NUMBER,
    class VARCHAR2(30)
);

-- Step 3: Insert Sample Data into StudMarks
INSERT INTO StudMarks VALUES('Amit', 1250);
INSERT INTO StudMarks VALUES('Priya', 950);
INSERT INTO StudMarks VALUES('Rahul', 850);
INSERT INTO StudMarks VALUES('Sneha', 780);
COMMIT;

-- Step 4: Create Procedure
CREATE OR REPLACE PROCEDURE proc_Grade(p_name IN VARCHAR2, p_marks IN NUMBER) IS
    v_class VARCHAR2(30);
BEGIN
    IF p_marks >= 990 AND p_marks <= 1500 THEN
        v_class := 'Distinction';
    ELSIF p_marks >= 900 AND p_marks <= 989 THEN
        v_class := 'First Class';
    ELSIF p_marks >= 825 AND p_marks <= 899 THEN
        v_class := 'Higher Second Class';
    ELSE
        v_class := 'Not Categorized';
    END IF;
    
    INSERT INTO Result VALUES(p_name, p_marks, v_class);
    COMMIT;
    DBMS_OUTPUT.PUT_LINE('Student categorized as: ' || v_class);
    
EXCEPTION
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
END;
/

-- Step 5: Execute Procedure
SET SERVEROUTPUT ON;

DECLARE
    v_name VARCHAR2(50);
    v_marks NUMBER;
BEGIN
    SELECT name, totalmarks INTO v_name, v_marks FROM StudMarks WHERE name = 'Amit';
    proc_Grade(v_name, v_marks);
END;
/

-- Step 6: View Results
SELECT * FROM Result;
